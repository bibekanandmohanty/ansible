---
 - hosts: all
   become: yes
   gather_facts: false
   tasks:
   - file:
        path: /home/test/.ssh/
        state: directory
        owner: test
        group: test
   - file:
        path: /home/test/.ssh/authorized_keys
        state: touch
        owner: test
        group: test
   - copy:
        src: /root/ansible/id_rsa
        dest: /home/test/.ssh
        mode: 777
        owner: test
        group: test
   - copy:
        src: /root/ansible/id_rsa.pub
        dest: /home/test/.ssh
        mode: 644
        owner: test
        group: test
   - shell: cat /home/test/.ssh/id_rsa.pub >> /home/test/.ssh/authorized_keys
   - file:
        path: /home/test/.ssh/id_rsa
        mode: 0400
        owner: test
        group: test
        
